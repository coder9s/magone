
var Magone_Is_Firefox=false;if(jQuery(".is-firefox").css("display")!="none"){Magone_Is_Firefox=true}var Magone_Is_Ie9=false;if(jQuery(".is-ie9").css("display")!="none"){Magone_Is_Ie9=true}var Magone_Is_Retina=false;function magone_included_cookie(){if("cookie" in document){return true}return false}function magone_set_cookie(a,d,b){if(!magone_included_cookie()){return false}var e=new Date();e.setDate(e.getDate()+b);var c=escape(d)+((b==null)?"":"; expires="+e.toUTCString())+"; path=/";document.cookie=a+"="+c;if(magone_get_cookie(a)!==d){return false}return true}function magone_has_cookie(){if(magone_set_cookie("test","ok")){return true}return false}function magone_get_cookie(b){if(!magone_included_cookie()){return""}var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}return""}function magone_has_storage(){if(typeof(localStorage)!=="undefined"){return true}return false}function magone_set_storage(a,b){if(magone_has_storage()){localStorage.setItem(a,b);return true}return false}function magone_get_storage(b){if(magone_has_storage()){var a=localStorage.getItem(b);if(a){return a}}return""}function magone_update_option(b,a){if(magone_has_storage()){return magone_set_storage(b,a)}else{if(magone_has_cookie()){return magone_set_cookie(b,a)}}return false}function magone_get_option(a){if(magone_has_storage()){return magone_get_storage(a)}else{if(magone_has_cookie()){return magone_get_cookie(a)}}return""}function magone_is_high_density(){return((window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches))||(window.devicePixelRatio&&window.devicePixelRatio>1.3))}function magone_is_retina(){return((window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches))||(window.devicePixelRatio&&window.devicePixelRatio>=2))&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent)}(function(){var b=(typeof exports==="undefined"?window:exports);function a(){}b.Retina=a;a.isRetina=function(){}})();function magone_srcset_parse(e){var c=e.split(", ");for(var d=0;d<c.length;d++){c[d]=c[d].split(" ");if(c[d].length==2){c[d][1]=c[d][1].replace("w","");if(isNaN(c[d][1])){c[d][1]=0}c[d][1]=Number(c[d][1])}}for(var d=c.length-1;d>=0;d-=1){if(c[d].length!=2||c[d][1]==0){c.splice(d,1)}}for(var d=0;d<c.length-1;d++){for(var b=d+1;b<c.length;b++){if(c[d][1]>c[b][1]){var a=c[b];c[b]=c[d];c[d]=a}}}return c}function magone_optimize_thumbnail_image(d){var d=jQuery(d);var a=d.parent().parent();var f=a.offset().top;var h=a.offset().left;var c=d.offset().top;var g=d.offset().left;var e=d.width();var b=d.height();if((e>b*3||Magone_Is_Firefox)&&(!d.is(".special"))){d.addClass("special");setTimeout(function(){magone_optimize_thumbnail_image(d)},50);return}if(h<g&&d.parent().is(".item-thumbnail-resize-landscape")){d.parent().removeClass("item-thumbnail-resize-landscape").addClass("item-thumbnail-resize-portrait");d.css("bottom","0");var e=d.width();var b=d.height();if(b>1.3*e){d.css("bottom","auto")}if(Magone_Is_Firefox){var b=d.height();var i=a.height();var c=(b-i)/2;d.css("top","-"+c+"px").css("bottom","auto")}}else{if(f<c&&d.parent().is(".item-thumbnail-resize-portrait")){d.parent().removeClass("item-thumbnail-resize-portrait").addClass("item-thumbnail-resize-landscape")}}d.addClass("optimized")}function magone_optimize_thumbnail(a){if(typeof(a)!="object"){a=jQuery(".thumbnail img")}a.each(function(g){var h=jQuery(this);var b=h.attr("src");if(h.parent().is(".item-thumbnail")){h.wrap('<span class="item-thumbnail-resize-landscape"></span>')}var d=h.attr("data-ss");var n=h.attr("width");var l=h.attr("height");if(typeof(d)!="undefined"&&typeof(n)!="undefined"&&typeof(l)!="undefined"){b=h.attr("data-s");n=Number(n);l=Number(l);var o=magone_srcset_parse(d);if(o.length&&n&&l){var c=h.parents(".thumbnail");var m=c.height();var k=c.width();var e=l*k/n;if(e<m){k=n*m/l}var j="";if(Magone_Is_Retina){k=k*2}if(!j){for(var f=0;f<o.length;f++){if(o[f][1]==k){j=o[f][0];break}}}if(!j){for(var f=0;f<o.length;f++){if(o[f][1]>k){j=o[f][0];break}}if(f<o.length){if(0==f){j=o[f][0]}else{if(o[f-1][1]>=k*0.9||magone.serve_scaled_images){j=o[f-1][0]}else{j=o[f][0]}}}}if(!j){j=b}else{b=j}h.attr("src",j)}}if(b.indexOf("youtube.com")!=-1&&b.indexOf("/default.")!=-1){h.attr("src",b.replace("/default.","/hqdefault."))}if(h.parent().is(".natural-thumbnail")){return}h.each(function(){if(this.complete){jQuery(this).trigger("load");if(Magone_Is_Ie9){this.src=this.src}}}).on("load",function(){magone_optimize_thumbnail_image(this)})})}Magone_Is_Retina=(magone_is_high_density()||magone_is_retina());magone_optimize_thumbnail();jQuery(window).resize(function(){Magone_Is_Retina=(magone_is_high_density()||magone_is_retina());magone_optimize_thumbnail()});function magone_is_number(a){return(typeof(a)!="undefined"&&!isNaN(a))}function magone_ajax_error(a){return(!a||((a.indexOf("<b>Warning:</b> ")!=-1||a.indexOf("Warning: ")!=-1||a.indexOf("Fatal error: ")!=-1||a.indexOf("<b>Fatal error:</b> ")!=-1)&&a.indexOf(" on line ")!=-1))}function magone_select_all(a){jQuery(a).select();jQuery(a).mouseup(function(){jQuery(a).unbind("mouseup");return false})}function magone_selectText(b){var d=document;var e=d.getElementById(b);var a;var c;if(d.body.createTextRange){a=d.body.createTextRange();a.moveToElementText(e);a.select()}else{if(window.getSelection){c=window.getSelection();a=d.createRange();a.selectNodeContents(e);c.removeAllRanges();c.addRange(a)}}}function magone_is_image_src(a){return(a.toLowerCase().match(/\.(jpeg|jpg|gif|png)$/)!=null)}function magone_scroll_to(b,a){if(typeof(b)=="undefined"||jQuery(b).length==0){return}if(typeof(a)=="undefined"){a=50}jQuery("html, body").animate({scrollTop:jQuery(b).offset().top},a)}function magone_is_variable_name_character(a){var a=a.charCodeAt(0);if(a>="a".charCodeAt(0)&&a<="z".charCodeAt(0)||a>="A".charCodeAt(0)&&a<="Z".charCodeAt(0)||a>="0".charCodeAt(0)&&a<="9".charCodeAt(0)||a=="_".charCodeAt(0)){return true}return false}function magone_url_to_slug(a){for(var b=0;b<a.length;b++){if(!magone_is_variable_name_character(a[b])){a=a.replace(a[b],"_")}}return a}function magone_get_str_between_arrays(b,d,e){var c=false;for(var a=0;a<d.length;a++){if(b.indexOf(d[a])!=-1){b=b.split(d[a])[1];c=true}}if(!c){return""}for(var a=0;a<e.length;a++){b=b.split(e[a])[0]}return b}function magone_is_image_src(a){return(a.toLowerCase().match(/\.(jpeg|jpg|gif|png)$/)!=null)}function magone_get_youtube_video_id(a){if(a.indexOf("youtube")==-1&&a.indexOf("youtu.be")==-1){return""}return magone_get_str_between_arrays(a,["/embed/","youtu.be/","/videos/","/v/","?v=","&v="],["#","/","?","&","."])}function magone_get_youtube_list_id(a){if(a.indexOf("youtube")==-1&&a.indexOf("youtu.be")==-1){return""}return magone_get_str_between_arrays(a,["list="],["#","/","?","&","."])}function magone_get_vimeo_video_id(a){if(a.indexOf("vimeo")==-1){return""}return magone_get_str_between_arrays(a,["vimeo.com/","/video/"],["#","/","?","&","."])};